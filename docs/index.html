<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Home - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-bigscreenplayer_bigscreenplayer.html">bigscreenplayer/bigscreenplayer</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.canPause">canPause</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.canSeek">canSeek</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.convertEpochMsToVideoTimeSeconds">convertEpochMsToVideoTimeSeconds</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.convertVideoTimeSecondsToEpochMs">convertVideoTimeSecondsToEpochMs</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.getCurrentTime">getCurrentTime</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.getDuration">getDuration</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.getFrameworkVersion">getFrameworkVersion</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.getLiveWindowData">getLiveWindowData</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.getLogLevels">getLogLevels</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.getMediaKind">getMediaKind</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.getPlayerElement">getPlayerElement</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.getSeekableRange">getSeekableRange</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.getWindowType">getWindowType</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.isEnded">isEnded</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.isPaused">isPaused</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.isPlayingAtLiveEdge">isPlayingAtLiveEdge</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.isSubtitlesAvailable">isSubtitlesAvailable</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.isSubtitlesEnabled">isSubtitlesEnabled</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.mock">mock</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.mockJasmine">mockJasmine</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.pause">pause</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.play">play</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.registerForStateChanges">registerForStateChanges</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.registerForSubtitleChanges">registerForSubtitleChanges</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.registerForTimeUpdates">registerForTimeUpdates</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.registerPlugin">registerPlugin</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.setCurrentTime">setCurrentTime</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.setLogLevel">setLogLevel</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.setSubtitlesEnabled">setSubtitlesEnabled</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.setTransportControlsPosition">setTransportControlsPosition</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.toggleDebug">toggleDebug</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.transitions">transitions</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.unmock">unmock</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.unregisterForStateChanges">unregisterForStateChanges</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.unregisterForSubtitleChanges">unregisterForSubtitleChanges</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.unregisterForTimeUpdates">unregisterForTimeUpdates</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#.unregisterPlugin">unregisterPlugin</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#~init">init</a></li><li data-type='method' style='display: none;'><a href="module-bigscreenplayer_bigscreenplayer.html#~tearDown">tearDown</a></li></ul></li><li><a href="module-bigscreenplayer_models_windowtypes.html">bigscreenplayer/models/windowtypes</a></li></ul>
</nav>

<div id="main">
    

    



    


    <section class="package">
        <h3> </h3>		
    </section>









    



    <section class="readme usertext">
        <article><h1>Bigscreen Player</h1>
<p><a href="https://travis-ci.com/bbc/bigscreen-player/branches"><img src="https://travis-ci.com/bbc/bigscreen-player.svg?branch=master" alt="Build Status"></a></p>
<blockquote>
<p>Simplified media playback for bigscreen devices.</p>
</blockquote>
<h2>Introduction</h2>
<p>The <em>Bigscreen Player</em> is an open source project developed by the BBC to simplify video and audio playback on a wide range of 'bigscreen' devices (TVs, set-top boxes, games consoles, and streaming devices).</p>
<p>This project should be considered <strong>Work in Progress</strong>. A full roadmap will be released soon.</p>
<h2>Getting Started</h2>
<p><code>$ npm install</code></p>
<h3>Initialisation</h3>
<p>Bigscreen Player uses requirejs for managing dependencies. Once you have required the player, a playback session can be initalised by simply calling the <code>init()</code> function with some initial data.</p>
<p>The player will render itself into a supplied parent element, and playback will begin as soon as enough data has buffered.</p>
<pre class="prettyprint source lang-javascript"><code>// configure the media player that will be used before loading
// see below for further details of ths config

// options are: msestrategy, nativestrategy, hybridstrategy, talstrategy (deprecated)
window.bigscreenPlayer.playbackStrategy = 'msestrategy';

require(
  [
    'bigscreenplayer/bigscreenplayer',
    'bigscreenplayer/windowtypes',
    'bigscreenplayer/mediakinds'
  ],

  function (BigscreenPlayer, WindowType, MediaKind) {

    var bigscreenPlayer = BigscreenPlayer();

    var playbackElement = document.createElement('div');
    playbackElement.id = 'BigscreenPlayback';

    var body = document.getElementByTagName('body')[0];
    body.appendChild(playbackElement);

    var minimalData = {
      media: {
        mimeType: 'video/mp4',
        urls: [
          {
            url: 'https://www.cdn1url.com/reallygoodvideo'
          }
        ]
      }
    }

    var optionalData = {
      initialPlaybackTime: 0, // Time (in seconds) to begin playback from
      media: {
        mimeType: 'video/mp4', // Used by TAL
        bitrate: 8940,         // Displayed by Debug Tool
        captionsUrl: 'https://www.somelovelycaptionsurl.com/captions',
        codec: 'h264',
        kind: MediaKind.VIDEO, // Can be VIDEO, or AUDIO
        urls: [
          // Multiple urls offer the ability to fail-over to another CDN if required
          {
            url: 'https://www.cdn1url.com/reallygoodvideo',
            cdn: 'cdn1' // Displayed by Debug Tool
          }, {
            url: 'https://www.cdn2url.com/reallygoodvideo',
            cdn: 'cdn2'
          }
        ]
      }
    }

    // STATIC for VOD content, GROWING/SLIDING for LIVE content
    var windowType = WindowType.STATIC;
    var enableSubtitles = false;

    bigscreenPlayer.init(playbackElement, optionalData, windowType, enableSubtitles);
  }
)
</code></pre>
<h3>Configuration</h3>
<p>The Bigscreen Player has some global configuration that is needed before initialisation. A <em>playback strategy</em> must be configured:</p>
<pre class="prettyprint source lang-javascript"><code>window.bigscreenPlayer.playbackStrategy = 'msestrategy' // OR 'nativestrategy' OR 'hybridstrategy' OR 'talstrategy' (deprecated)
</code></pre>
<p>See the <a href="https://github.com/bbc/bigscreen-player/wiki/Playback-Strategy">configuration</a> wiki page for further details on these strategies.</p>
<h3>Reacting to state changes</h3>
<p>State changes which are emitted from the player can be acted upon to by registering a callback. The callback will receive all of the following state changes as the <code>state</code> property of the event:</p>
<ul>
<li>MediaState.STOPPED</li>
<li>MediaState.PAUSED</li>
<li>MediaState.PLAYING</li>
<li>MediaState.WAITING</li>
<li>MediaState.ENDED</li>
<li>MediaState.FATAL_ERROR</li>
</ul>
<p>State changes may be registered for before initialisation and will automatically be cleared upon <code>tearDown()</code> of the player.</p>
<pre class="prettyprint source lang-javascript"><code>var bigscreenPlayer = BigscreenPlayer();

// The token is only required in the case where the function is anonymous, a reference to the function can be stored and used to unregister otherwise.
var stateChangeToken = bigscreenPlayer.registerForStateChanges(function (event) {
  if(event.state == MediaState.PLAYING) {
    console.log('Playing');
    // handle playing event
  }
});

bigscreenPlayer.unRegisterForStateChanges(stateChangeToken);
</code></pre>
<h3>Reacting to time updates</h3>
<p>Time updates are emitted multiple times a second. Your application can register to receive these updates. The emitted object contains the <code>currentTime</code> and <code>endOfStream</code> properties.</p>
<p>Time updates may be registered for before initialisation and will automatically be cleared upon <code>tearDown()</code> of the player.</p>
<pre class="prettyprint source lang-javascript"><code>var bigscreenPlayer = BigscreenPlayer();

// The token is only required in the case where the function is anonymous, a reference to the function can be stored and used to unregister otherwise.
var timeUpdateToken = bigscreenPlayer.registerForTimeUpdates(function (event) {
    console.log('Current Time: ' + event.currentTime);
});

bigscreenPlayer.unRegisterForTimeUpdates(timeUpdateToken);
</code></pre>
<h3>Reacting to subtitles being turned on/off</h3>
<p>This is emitted on every <code>setSubtitlesEnabled</code> call. The emitted object contains an <code>enabled</code> property.</p>
<p>This may be registered for before initialisation and will automatically be cleared upon <code>tearDown()</code> of the player.</p>
<pre class="prettyprint source lang-javascript"><code>var bigscreenPlayer = BigscreenPlayer();

// The token is only required in the case where the function is anonymous, a reference to the function can be stored and used to unregister otherwise.
var subtitleChangeToken = bigscreenPlayer.registerForSubtitleChanges(function (event) {
    console.log('Subttiles enabled: ' + event.enabled);
});

bigscreenPlayer.unregisterForSubtitleChanges(subtitleChangeToken);
</code></pre>
<h3>Creating a plugin</h3>
<p>Plugins can be created to extend the functionality of the Bigscreen Player by adhering to an interface which propogates non state change events from the player. For example, when an error is raised or cleared.</p>
<p>The full interface is as follows:</p>
<ul>
<li>onError</li>
<li>onFatalError</li>
<li>onErrorCleared</li>
<li>onErrorHandled</li>
<li>onBuffering</li>
<li>onBufferingCleared</li>
<li>onScreenCapabilityDetermined</li>
</ul>
<p>An example plugin may look like:</p>
<pre class="prettyprint source lang-javascript"><code>function ExamplePlugin (appName) {

  var name = appName;

  function onFatalError (evt) {
    console.log('A fatal error has occured in the app: ' + name);
  }

  function onErrorHandled (evt) {
    console.log('The ' + name + ' app is handling a playback error');
  }

  return {
    onFatalError: onFatalError,
    onErrorHandled: onErrorHandled
  };
}
</code></pre>
<pre class="prettyprint source lang-javascript"><code>var bigscreenPlayer = BigscreenPlayer();

var examplePlugin = ExamplePlugin('myApp');

bigscreenPlayer.registerPlugin(examplePlugin);

// initialise bigscreenPlayer - see above

// you should unregister your plugins as part of your playback cleanup

// calling with no argument will unregister all plugins
bigscreenPlayer.unregisterPlugin(examplePlugin);

</code></pre>
<h2>Testing</h2>
<p>The project is fully unit tested using the <a href="https://jasmine.github.io/">Jasmine</a> framework. To run the tests:</p>
<p><code>$ npm run spec</code></p>
<p>This project currently has unit test coverage but no integration test suite. This is on our Roadmap to address. Quality is ensured via extensive manual testing however.</p>
<h3>Mocking media playback</h3>
<p>When writing tests for your application it may be useful to use the mocking functions provided. This creates a fake player with mocking hook functions to simulate real world scenarios.</p>
<p>See <a href="https://github.com/bbc/bigscreen-player/wiki/Mocking-Bigscreen-Player">here</a> for example usage.</p>
<h2>Releasing</h2>
<ol>
<li>
<p>Create a PR.</p>
</li>
<li>
<p>Label the PR with one of these labels:</p>
<ul>
<li><code>semver prerelease</code></li>
<li><code>semver patch</code></li>
<li><code>semver minor</code></li>
<li><code>semver major</code></li>
</ul>
<p>along with one of the following:</p>
<ul>
<li><code>has a user facing change</code></li>
<li><code>has no user facing changes</code></li>
</ul>
<p>The labels-checker PR check will let you know if it is correct.</p>
</li>
<li>
<p>Get a review from the core team.</p>
</li>
<li>
<p>If the PR checks are green. The core team can merge to master.</p>
</li>
<li>
<p>Automation takes care of the package versioning.</p>
</li>
<li>
<p>Publishing to NPM is handled with our <a href="https://github.com/bbc/bigscreen-player/blob/master/.travis.yml">Travis CI integration</a>.</p>
</li>
</ol>
<h2>API Reference</h2>
<p>The full api is documented <a href="https://github.com/bbc/bigscreen-player/wiki/API-Reference">here</a>.</p>
<h2>Contributing</h2>
<p>See <a href="CONTRIBUTING.md">CONTRIBUTING.md</a></p>
<h2>License</h2>
<p>The Bigscreen Player is available to everyone under the terms of the Apache 2.0 open source licence. Take a look at the LICENSE file in the code for more information.</p></article>
    </section>






    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a> on Fri Aug 21 2020 17:19:36 GMT+0100 (British Summer Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>