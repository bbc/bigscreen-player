<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Adding meta -->
    
    
    <meta name="description" content="Simplified media playback for bigscreen devices" />
    
    

    <!-- Adding external script-->
    

    <!-- Adding external style-->
    

    <!-- Adding scripts-->
    

    <!-- Adding style-->
    

    <!-- Adding overlay script-->
    

    <!-- Adding overlay style-->
    


    <title>
      bigscreenplayer.js
    </title>

    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/third-party/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/third-party/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/reset.css">
    <link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-base.css">
    <link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-dark.css">
    
    <svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
    style="display:none">
    <defs>
        <symbol id="copy-icon" viewbox="0 0 488.3 488.3">
            <g>
                <path
                    d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z" />
                <path
                    d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z" />
            </g>
        </symbol>
        <symbol id='search-icon' viewBox="0 0 512 512">
            <g>
                <g>
                    <path
                        d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z" />
                </g>
            </g>
            <g>
                <g>
                    <path
                        d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z" />
                </g>
            </g>
        </symbol>
        <symbol id="down-icon" viewBox="0 0 16 16">
            <path 
                fill-rule="evenodd" 
                clip-rule="evenodd" 
                d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"
            >
            </path>
        </symbol>
    </defs>
</svg>
  </head>

  <body>

    <nav class="navbar" id="navbar">
      <h2><a href="index.html"><img src='bsp-logo.png'/></a></h2><div class="search-box" id="search-box"><div class="search-box-input-container"><input class="search-box-input" type="text" placeholder="Search..." id="search-box-input" /><svg class="search-icon" alt="search-icon"><use xlink:href="#search-icon"></use></svg></div><div class="search-item-container" id="search-item-container"><ul class="search-item-ul" id="search-item-ul"></ul></div></div><div class="sidebar-main-content" id="sidebar-main-content"><ul><li class="menu-li"><a href='https://github.com/bbc/bigscreen-player' class=' menu-link' id='' target='_blank'>Github</a></li><li class="menu-li"><a href='https://www.npmjs.com/package/bigscreen-player' class=' menu-link' id='' target='_blank'>NPM</a></li></ul><div class="accordion collapsed" id="2118123" > <h3 class="accordion-heading">Tutorials<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion-list" id=""><a href="tutorial-CDN Failover.html">CDN Failover</a></li><li class="accordion-list" id=""><a href="tutorial-Design.html">Design</a></li><li class="accordion-list" id=""><a href="tutorial-Events.html">Events</a></li><li class="accordion-list" id=""><a href="tutorial-Getting Started.html">Getting Started</a></li><li class="accordion-list" id=""><a href="tutorial-Mocking Playback.html">Mocking Playback</a></li><li class="accordion-list" id=""><a href="tutorial-Playback Strategies.html">Playback Strategies</a></li><li class="accordion-list" id=""><a href="tutorial-Plugins.html">Plugins</a></li><li class="accordion-list" id=""><a href="tutorial-Testing.html">Testing</a></li></ul> </div><div class="accordion collapsed" id="1185739" > <h3 class="accordion-heading">Modules<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion collapsed child" id=8253820><div class="accordion-heading child"><a href="module-bigscreenplayer_bigscreenplayer.html">bigscreenplayer/bigscreenplayer</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.canPause">canPause</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.canSeek">canSeek</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.convertEpochMsToVideoTimeSeconds">convertEpochMsToVideoTimeSeconds</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.convertVideoTimeSecondsToEpochMs">convertVideoTimeSecondsToEpochMs</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.getCurrentTime">getCurrentTime</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.getDuration">getDuration</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.getFrameworkVersion">getFrameworkVersion</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.getLiveWindowData">getLiveWindowData</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.getLogLevels">getLogLevels</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.getMediaKind">getMediaKind</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.getPlayerElement">getPlayerElement</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.getSeekableRange">getSeekableRange</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.getWindowType">getWindowType</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.isEnded">isEnded</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.isPaused">isPaused</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.isPlayingAtLiveEdge">isPlayingAtLiveEdge</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.isSubtitlesAvailable">isSubtitlesAvailable</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.isSubtitlesEnabled">isSubtitlesEnabled</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.mock">mock</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.mockJasmine">mockJasmine</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.pause">pause</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.play">play</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.registerForStateChanges">registerForStateChanges</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.registerForSubtitleChanges">registerForSubtitleChanges</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.registerForTimeUpdates">registerForTimeUpdates</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.registerPlugin">registerPlugin</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.setCurrentTime">setCurrentTime</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.setLogLevel">setLogLevel</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.setSubtitlesEnabled">setSubtitlesEnabled</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.setTransportControlsPosition">setTransportControlsPosition</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.toggleDebug">toggleDebug</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.transitions">transitions</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.unmock">unmock</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.unregisterForStateChanges">unregisterForStateChanges</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.unregisterForSubtitleChanges">unregisterForSubtitleChanges</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.unregisterForTimeUpdates">unregisterForTimeUpdates</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#.unregisterPlugin">unregisterPlugin</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#~getLiveSupport">getLiveSupport</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#~init">init</a></li><li data-type='method'><a href="module-bigscreenplayer_bigscreenplayer.html#~tearDown">tearDown</a></li></ul></li></ul> </div><div class="accordion collapsed" id="1081551" > <h3 class="accordion-heading">Global<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion-list" id=""><a href="global.html#hasAttribute">hasAttribute</a></li><li class="accordion-list" id=""><a href="global.html#rgbaToRGB">rgbaToRGB</a></li><li class="accordion-list" id=""><a href="global.html#safeRemoveElement">safeRemoveElement</a></li><li class="accordion-list" id=""><a href="global.html#Time">Time</a></li><li class="accordion-list" id=""><a href="global.html#WindowTypes">WindowTypes</a></li></ul> </div></div>
      

    </nav>
    <div class="navbar-ham" id="navbar-ham">
      <div>
        <div class="first"></div>
        <div class="second"></div>
        <div class="third"></div>
      </div>
    </div>

    <div id="main" class="main-content">
      
      <h1 id='page-title' class="page-title">
        bigscreenplayer.js
      </h1>
      

      



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module bigscreenplayer/bigscreenplayer
 */
import MediaState from './models/mediastate'
import PlayerComponent from './playercomponent'
import PauseTriggers from './models/pausetriggers'
import DynamicWindowUtils from './dynamicwindowutils'
import WindowTypes from './models/windowtypes'
import MockBigscreenPlayer from './mockbigscreenplayer'
import Plugins from './plugins'
import Chronicle from './debugger/chronicle'
import DebugTool from './debugger/debugtool'
import SlidingWindowUtils from './utils/timeutils'
import callCallbacks from './utils/callcallbacks'
import MediaSources from './mediasources'
import Version from './version'
import Resizer from './resizer'
import ReadyHelper from './readyhelper'
import Subtitles from './subtitles/subtitles'

function BigscreenPlayer () {
  let stateChangeCallbacks = []
  let timeUpdateCallbacks = []
  let subtitleCallbacks = []

  let playerReadyCallback
  let playerErrorCallback
  let mediaKind
  let initialPlaybackTimeEpoch
  let serverDate
  let playerComponent
  let resizer
  let pauseTrigger
  let isSeeking = false
  let endOfStream
  let windowType
  let mediaSources
  let playbackElement
  let readyHelper
  let subtitles

  const END_OF_STREAM_TOLERANCE = 10

  function mediaStateUpdateCallback (evt) {
    if (evt.timeUpdate) {
      DebugTool.time(evt.data.currentTime)
      callCallbacks(timeUpdateCallbacks, {
        currentTime: evt.data.currentTime,
        endOfStream: endOfStream
      })
    } else {
      let stateObject = {state: evt.data.state}

      if (evt.data.state === MediaState.PAUSED) {
        endOfStream = false
        stateObject.trigger = pauseTrigger || PauseTriggers.DEVICE
        pauseTrigger = undefined
      }

      if (evt.data.state === MediaState.FATAL_ERROR) {
        stateObject = {
          state: MediaState.FATAL_ERROR,
          isBufferingTimeoutError: evt.isBufferingTimeoutError
        }
      }

      if (evt.data.state === MediaState.WAITING) {
        stateObject.isSeeking = isSeeking
        isSeeking = false
      }

      stateObject.endOfStream = endOfStream
      DebugTool.event(stateObject)

      callCallbacks(stateChangeCallbacks, stateObject)
    }

    if (evt.data.seekableRange) {
      DebugTool.keyValue({key: 'seekableRangeStart', value: deviceTimeToDate(evt.data.seekableRange.start)})
      DebugTool.keyValue({key: 'seekableRangeEnd', value: deviceTimeToDate(evt.data.seekableRange.end)})
    }

    if (evt.data.duration) {
      DebugTool.keyValue({key: 'duration', value: evt.data.duration})
    }

    if (playerComponent &amp;&amp; readyHelper) {
      readyHelper.callbackWhenReady(evt)
    }
  }

  function deviceTimeToDate (time) {
    if (getWindowStartTime()) {
      return new Date(convertVideoTimeSecondsToEpochMs(time))
    } else {
      return new Date(time * 1000)
    }
  }

  function convertVideoTimeSecondsToEpochMs (seconds) {
    return getWindowStartTime() ? getWindowStartTime() + (seconds * 1000) : undefined
  }

  function bigscreenPlayerDataLoaded (bigscreenPlayerData, enableSubtitles) {
    if (windowType !== WindowTypes.STATIC) {
      bigscreenPlayerData.time = mediaSources.time()
      serverDate = bigscreenPlayerData.serverDate

      initialPlaybackTimeEpoch = bigscreenPlayerData.initialPlaybackTime
      // overwrite initialPlaybackTime with video time (it comes in as epoch time for a sliding/growing window)
      bigscreenPlayerData.initialPlaybackTime = SlidingWindowUtils.convertToSeekableVideoTime(bigscreenPlayerData.initialPlaybackTime, bigscreenPlayerData.time.windowStartTime)
    }

    mediaKind = bigscreenPlayerData.media.kind
    endOfStream = windowType !== WindowTypes.STATIC &amp;&amp; (!bigscreenPlayerData.initialPlaybackTime &amp;&amp; bigscreenPlayerData.initialPlaybackTime !== 0)

    readyHelper = new ReadyHelper(
      bigscreenPlayerData.initialPlaybackTime,
      windowType,
      PlayerComponent.getLiveSupport(),
      playerReadyCallback
    )

    playerComponent = new PlayerComponent(
      playbackElement,
      bigscreenPlayerData,
      mediaSources,
      windowType,
      mediaStateUpdateCallback,
      playerErrorCallback
    )

    subtitles = Subtitles(
      playerComponent,
      enableSubtitles,
      playbackElement,
      bigscreenPlayerData.media.subtitleCustomisation,
      mediaSources,
      callSubtitlesCallbacks
    )
  }

  function getWindowStartTime () {
    return mediaSources &amp;&amp; mediaSources.time().windowStartTime
  }

  function getWindowEndTime () {
    return mediaSources &amp;&amp; mediaSources.time().windowEndTime
  }

  function toggleDebug () {
    if (playerComponent) {
      DebugTool.toggleVisibility()
    }
  }

  function callSubtitlesCallbacks (enabled) {
    callCallbacks(subtitleCallbacks, { enabled: enabled })
  }

  function setSubtitlesEnabled (enabled) {
    enabled ? subtitles.enable() : subtitles.disable()
    callSubtitlesCallbacks(enabled)

    if (!resizer.isResized()) {
      enabled ? subtitles.show() : subtitles.hide()
    }
  }

  function isSubtitlesEnabled () {
    return subtitles ? subtitles.enabled() : false
  }

  function isSubtitlesAvailable () {
    return subtitles ? subtitles.available() : false
  }

  return /** @alias module:bigscreenplayer/bigscreenplayer */{
    /**
     * Data required for playback
     * @typedef {Object} BigscreenPlayerData
     * @property {Object} media
     * @property {String} media.type - source type e.g 'application/dash+xml'
     * @property {String} media.mimeType - mimeType e.g 'video/mp4'
     * @property {String} media.kind - 'video' or 'audio'
     * @property {String} media.captionsUrl - 'Location for a captions file'
     * @property {MediaUrl[]} media.urls - Media urls to use
     * @property {Date} serverDate - Date object with server time offset
     */

    /**
      * @typedef {Object} MediaUrl
      * @property {String} url - media endpoint
      * @property {String} cdn - identifier for the endpoint
      */

    /**
     *
     * @typedef {object} InitCallbacks
     * @property {function} [callbacks.onSuccess] - Called after Bigscreen Player is initialised
     * @property {function} [callbacks.onError] - Called when an error occurs during initialisation
     */

    /**
     * Call first to initialise bigscreen player for playback.
     * @function
     * @name init
     * @param {HTMLDivElement} playbackElement - The Div element where content elements should be rendered
     * @param {BigsceenPlayerData} bigscreenPlayerData
     * @param {WindowTypes} newWindowType
     * @param {boolean} enableSubtitles - Enable subtitles on initialisation
     * @param {TALDevice} newDevice - An optional TAL device object
     * @param {InitCallbacks} callbacks
     */
    init: (newPlaybackElement, bigscreenPlayerData, newWindowType, enableSubtitles, callbacks) => {
      playbackElement = newPlaybackElement
      Chronicle.init()
      resizer = Resizer()
      DebugTool.setRootElement(playbackElement)
      DebugTool.keyValue({key: 'framework-version', value: Version})
      windowType = newWindowType
      serverDate = bigscreenPlayerData.serverDate
      if (!callbacks) {
        callbacks = {}
      }

      playerReadyCallback = callbacks.onSuccess
      playerErrorCallback = callbacks.onError

      const mediaSourceCallbacks = {
        onSuccess: () => bigscreenPlayerDataLoaded(bigscreenPlayerData, enableSubtitles),
        onError: (error) => {
          if (callbacks.onError) {
            callbacks.onError(error)
          }
        }
      }

      mediaSources = MediaSources()

      // Backwards compatibility with Old API; to be removed on Major Version Update
      if (bigscreenPlayerData.media &amp;&amp; !bigscreenPlayerData.media.captions &amp;&amp; bigscreenPlayerData.media.captionsUrl) {
        bigscreenPlayerData.media.captions = [{
          url: bigscreenPlayerData.media.captionsUrl
        }]
      }

      mediaSources.init(bigscreenPlayerData.media, serverDate, windowType, getLiveSupport(), mediaSourceCallbacks)
    },

    /**
     * Should be called at the end of all playback sessions. Resets state and clears any UI.
     * @function
     * @name tearDown
     */
    tearDown: function () {
      if (subtitles) {
        subtitles.tearDown()
        subtitles = undefined
      }

      if (playerComponent) {
        playerComponent.tearDown()
        playerComponent = undefined
      }

      if (mediaSources) {
        mediaSources.tearDown()
        mediaSources = undefined
      }

      stateChangeCallbacks = []
      timeUpdateCallbacks = []
      subtitleCallbacks = []
      endOfStream = undefined
      mediaKind = undefined
      pauseTrigger = undefined
      windowType = undefined
      resizer = undefined
      this.unregisterPlugin()
      DebugTool.tearDown()
      Chronicle.tearDown()
    },

    /**
     * Pass a function to call whenever the player transitions state.
     * @see {@link module:models/mediastate}
     * @function
     * @param {Function} callback
     */
    registerForStateChanges: (callback) => {
      stateChangeCallbacks.push(callback)
      return callback
    },

    /**
     * Unregisters a previously registered callback.
     * @function
     * @param {Function} callback
     */
    unregisterForStateChanges: (callback) => {
      const indexOf = stateChangeCallbacks.indexOf(callback)
      if (indexOf !== -1) {
        stateChangeCallbacks.splice(indexOf, 1)
      }
    },

    /**
     * Pass a function to call whenever the player issues a time update.
     * @function
     * @param {Function} callback
     */
    registerForTimeUpdates: (callback) => {
      timeUpdateCallbacks.push(callback)
      return callback
    },

    /**
     * Unregisters a previously registered callback.
     * @function
     * @param {Function} callback
     */
    unregisterForTimeUpdates: (callback) => {
      const indexOf = timeUpdateCallbacks.indexOf(callback)

      if (indexOf !== -1) {
        timeUpdateCallbacks.splice(indexOf, 1)
      }
    },

    /**
     * Pass a function to be called whenever subtitles are enabled or disabled.
     * @function
     * @param {Function} callback
     */
    registerForSubtitleChanges: (callback) => {
      subtitleCallbacks.push(callback)
      return callback
    },

    /**
     * Unregisters a previously registered callback for changes to subtitles.
     * @function
     * @param {Function} callback
     */
    unregisterForSubtitleChanges: (callback) => {
      const indexOf = subtitleCallbacks.indexOf(callback)
      if (indexOf !== -1) {
        subtitleCallbacks.splice(indexOf, 1)
      }
    },

    /**
     * Sets the current time of the media asset.
     * @function
     * @param {Number} time - In seconds
     */
    setCurrentTime: function (time) {
      DebugTool.apicall('setCurrentTime')
      if (playerComponent) {
        // this flag must be set before calling into playerComponent.setCurrentTime - as this synchronously fires a WAITING event (when native strategy).
        isSeeking = true
        playerComponent.setCurrentTime(time)
        endOfStream = windowType !== WindowTypes.STATIC &amp;&amp; Math.abs(this.getSeekableRange().end - time) &lt; END_OF_STREAM_TOLERANCE
      }
    },

    setPlaybackRate: (rate) => {
      if (playerComponent) {
        playerComponent.setPlaybackRate(rate)
      }
    },

    getPlaybackRate: () => playerComponent &amp;&amp; playerComponent.getPlaybackRate(),

    /**
     * Returns the media asset's current time in seconds.
     * @function
     */
    getCurrentTime: () => playerComponent &amp;&amp; playerComponent.getCurrentTime() || 0,

    /**
     * Returns the current media kind.
     * 'audio' or 'video'
     * @function
     */
    getMediaKind: () => mediaKind,

    /**
     * Returns the current window type.
     * @see {@link module:bigscreenplayer/models/windowtypes}
     * @function
     */
    getWindowType: () => windowType,

    /**
     * Returns an object including the current start and end times.
     * @function
     * @returns {Object} {start: Number, end: Number}
     */
    getSeekableRange: () => playerComponent ? playerComponent.getSeekableRange() : {},

    /**
    * @function
    * @returns {boolean} Returns true if media is initialised and playing a live stream within a tolerance of the end of the seekable range (10 seconds).
    */
    isPlayingAtLiveEdge: function () {
      return !!playerComponent &amp;&amp; windowType !== WindowTypes.STATIC &amp;&amp; Math.abs(this.getSeekableRange().end - this.getCurrentTime()) &lt; END_OF_STREAM_TOLERANCE
    },

    /**
     * @function
     * @return {Object} An object of the shape {windowStartTime: Number, windowEndTime: Number, initialPlaybackTime: Number, serverDate: Date}
     */
    getLiveWindowData: () => {
      if (windowType === WindowTypes.STATIC) {
        return {}
      }

      return {
        windowStartTime: getWindowStartTime(),
        windowEndTime: getWindowEndTime(),
        initialPlaybackTime: initialPlaybackTimeEpoch,
        serverDate: serverDate
      }
    },

    /**
     * @function
     * @returns the duration of the media asset.
     */
    getDuration: () => playerComponent &amp;&amp; playerComponent.getDuration(),

    /**
     * @function
     * @returns if the player is paused.
     */
    isPaused: () => playerComponent ? playerComponent.isPaused() : true,

    /**
     * @function
     * @returns if the media asset has ended.
     */
    isEnded: () => playerComponent ? playerComponent.isEnded() : false,

    /**
     * Play the media assest from the current point in time.
     * @function
     */
    play: () => {
      DebugTool.apicall('play')
      playerComponent.play()
    },

    /**
     * Pause the media asset.
     * @function
     * @param {*} opts
     * @param {boolean} opts.userPause
     * @param {boolean} opts.disableAutoResume
     */
    pause: (opts) => {
      DebugTool.apicall('pause')
      pauseTrigger = opts &amp;&amp; opts.userPause === false ? PauseTriggers.APP : PauseTriggers.USER
      playerComponent.pause(opts)
    },

    resize: (top, left, width, height, zIndex) => {
      subtitles.hide()
      resizer.resize(playbackElement, top, left, width, height, zIndex)
    },

    clearResize: () => {
      if (subtitles.enabled()) {
        subtitles.show()
      } else {
        subtitles.hide()
      }
      resizer.clear(playbackElement)
    },

    /**
     * Set whether or not subtitles should be enabled.
     * @function
     * @param {boolean} value
     */
    setSubtitlesEnabled: setSubtitlesEnabled,

    /**
     * @function
     * @return if subtitles are currently enabled.
     */
    isSubtitlesEnabled: isSubtitlesEnabled,

    /**
     * @function
     * @return Returns whether or not subtitles are currently enabled.
     */
    isSubtitlesAvailable: isSubtitlesAvailable,

    areSubtitlesCustomisable: () => {
      return !(window.bigscreenPlayer &amp;&amp; window.bigscreenPlayer.overrides &amp;&amp; window.bigscreenPlayer.overrides.legacySubtitles)
    },

    customiseSubtitles: (styleOpts) => {
      if (subtitles) {
        subtitles.customise(styleOpts)
      }
    },

    renderSubtitleExample: (xmlString, styleOpts, safePosition) => {
      if (subtitles) {
        subtitles.renderExample(xmlString, styleOpts, safePosition)
      }
    },

    clearSubtitleExample: () => {
      if (subtitles) {
        subtitles.clearExample()
      }
    },

    /**
     *
     * An enum may be used to set the on-screen position of any transport controls
     * (work in progress to remove this - UI concern).
     * @function
     * @param {*} position
     */
    setTransportControlsPosition: (position) => {
      if (subtitles) {
        subtitles.setPosition(position)
      }
    },

    /**
     * @function
     * @return Returns whether the current media asset is seekable.
     */
    canSeek: function () {
      return windowType === WindowTypes.STATIC || DynamicWindowUtils.canSeek(getWindowStartTime(), getWindowEndTime(), getLiveSupport(), this.getSeekableRange())
    },

    /**
     * @function
     * @return Returns whether the current media asset is pausable.
     */
    canPause: () => {
      return windowType === WindowTypes.STATIC || DynamicWindowUtils.canPause(getWindowStartTime(), getWindowEndTime(), getLiveSupport())
    },

    /**
     * Return a mock for in place testing.
     * @function
     * @param {*} opts
     */
    mock: function (opts) { MockBigscreenPlayer.mock(this, opts) },

    /**
     * Unmock the player.
     * @function
     */
    unmock: function () { MockBigscreenPlayer.unmock(this) },

    /**
     * Return a mock for unit tests.
     * @function
     * @param {*} opts
     */
    mockJasmine: function (opts) { MockBigscreenPlayer.mockJasmine(this, opts) },

    /**
     * Register a plugin for extended events.
     * @function
     * @param {*} plugin
     */
    registerPlugin: (plugin) => Plugins.registerPlugin(plugin),

    /**
     * Unregister a previously registered plugin.
     * @function
     * @param {*} plugin
     */
    unregisterPlugin: (plugin) => Plugins.unregisterPlugin(plugin),

    /**
     * Returns an object with a number of functions related to the ability to transition state
     * given the current state and the playback strategy in use.
     * @function
     */
    transitions: () => playerComponent ? playerComponent.transitions() : {},

    /**
     * @function
     * @return The media element currently being used.
     */
    getPlayerElement: () => playerComponent &amp;&amp; playerComponent.getPlayerElement(),

    /**
     * @function
     * @param {Number} epochTime - Unix Epoch based time in milliseconds.
     * @return the time in seconds within the current sliding window.
     */
    convertEpochMsToVideoTimeSeconds: (epochTime) => {
      return getWindowStartTime() ? Math.floor((epochTime - getWindowStartTime()) / 1000) : undefined
    },

    /**
     * @function
     * @return The runtime version of the library.
     */
    getFrameworkVersion: () => {
      return Version
    },

    /**
     * @function
     * @param {Number} time - Seconds
     * @return the time in milliseconds within the current sliding window.
     */
    convertVideoTimeSecondsToEpochMs: convertVideoTimeSecondsToEpochMs,

    /**
     * Toggle the visibility of the debug tool overlay.
     * @function
     */
    toggleDebug: toggleDebug,

    /**
     * @function
     * @return {Object} - Key value pairs of available log levels
     */
    getLogLevels: () => DebugTool.logLevels,

    /**
     * @function
     * @param logLevel -  log level to display @see getLogLevels
     */
    setLogLevel: DebugTool.setLogLevel,
    getDebugLogs: () => Chronicle.retrieve()
  }
}

/**
 * @function
 * @param {TALDevice} device
 * @return the live support of the device.
 */
function getLiveSupport () {
  return PlayerComponent.getLiveSupport()
}

BigscreenPlayer.getLiveSupport = getLiveSupport

BigscreenPlayer.version = Version

export default BigscreenPlayer
</code></pre>
        </article>
    </section>




    </div>

    <footer class="footer" id="footer">
      
    </footer>

    <script src="scripts/third-party/prettify.js"></script>
    <script src="scripts/third-party/lang-css.js"></script>
    <script type="text/javascript" src="scripts/misc.js"></script>

    <script>prettyPrint();</script>
    <script src="scripts/linenumber.js"></script>
    <script src="scripts/fix-code-block.js"></script>
    <script src="scripts/fix-navbar.js"></script>
    
      <script src="scripts/search.js"></script>
      <script src="scripts/third-party/fuse.js"></script>
      <script>
        var list = [{"title":"CDN Failover","link":"CDN Failover"},{"title":"Design","link":"Design"},{"title":"Events","link":"Events"},{"title":"Getting Started","link":"Getting Started"},{"title":"Mocking Playback","link":"Mocking Playback"},{"title":"Playback Strategies","link":"Playback Strategies"},{"title":"Plugins","link":"Plugins"},{"title":"Testing","link":"Testing"},{"title":"bigscreenplayer/bigscreenplayer","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html\">bigscreenplayer/bigscreenplayer</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.canPause","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.canPause\">module:bigscreenplayer/bigscreenplayer.canPause &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.canSeek","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.canSeek\">module:bigscreenplayer/bigscreenplayer.canSeek &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.convertEpochMsToVideoTimeSeconds","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.convertEpochMsToVideoTimeSeconds\">module:bigscreenplayer/bigscreenplayer.convertEpochMsToVideoTimeSeconds &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.convertVideoTimeSecondsToEpochMs","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.convertVideoTimeSecondsToEpochMs\">module:bigscreenplayer/bigscreenplayer.convertVideoTimeSecondsToEpochMs &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.getCurrentTime","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.getCurrentTime\">module:bigscreenplayer/bigscreenplayer.getCurrentTime &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.getDuration","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.getDuration\">module:bigscreenplayer/bigscreenplayer.getDuration &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.getFrameworkVersion","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.getFrameworkVersion\">module:bigscreenplayer/bigscreenplayer.getFrameworkVersion &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.getLiveWindowData","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.getLiveWindowData\">module:bigscreenplayer/bigscreenplayer.getLiveWindowData &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.getLogLevels","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.getLogLevels\">module:bigscreenplayer/bigscreenplayer.getLogLevels &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.getMediaKind","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.getMediaKind\">module:bigscreenplayer/bigscreenplayer.getMediaKind &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.getPlayerElement","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.getPlayerElement\">module:bigscreenplayer/bigscreenplayer.getPlayerElement &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.getSeekableRange","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.getSeekableRange\">module:bigscreenplayer/bigscreenplayer.getSeekableRange &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.getWindowType","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.getWindowType\">module:bigscreenplayer/bigscreenplayer.getWindowType &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.isEnded","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.isEnded\">module:bigscreenplayer/bigscreenplayer.isEnded &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.isPaused","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.isPaused\">module:bigscreenplayer/bigscreenplayer.isPaused &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.isPlayingAtLiveEdge","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.isPlayingAtLiveEdge\">module:bigscreenplayer/bigscreenplayer.isPlayingAtLiveEdge &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.isSubtitlesAvailable","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.isSubtitlesAvailable\">module:bigscreenplayer/bigscreenplayer.isSubtitlesAvailable &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.isSubtitlesEnabled","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.isSubtitlesEnabled\">module:bigscreenplayer/bigscreenplayer.isSubtitlesEnabled &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.mock","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.mock\">module:bigscreenplayer/bigscreenplayer.mock &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.mockJasmine","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.mockJasmine\">module:bigscreenplayer/bigscreenplayer.mockJasmine &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.pause","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.pause\">module:bigscreenplayer/bigscreenplayer.pause &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.play","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.play\">module:bigscreenplayer/bigscreenplayer.play &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.registerForStateChanges","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.registerForStateChanges\">module:bigscreenplayer/bigscreenplayer.registerForStateChanges &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.registerForSubtitleChanges","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.registerForSubtitleChanges\">module:bigscreenplayer/bigscreenplayer.registerForSubtitleChanges &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.registerForTimeUpdates","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.registerForTimeUpdates\">module:bigscreenplayer/bigscreenplayer.registerForTimeUpdates &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.registerPlugin","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.registerPlugin\">module:bigscreenplayer/bigscreenplayer.registerPlugin &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.setCurrentTime","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.setCurrentTime\">module:bigscreenplayer/bigscreenplayer.setCurrentTime &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.setLogLevel","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.setLogLevel\">module:bigscreenplayer/bigscreenplayer.setLogLevel &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.setSubtitlesEnabled","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.setSubtitlesEnabled\">module:bigscreenplayer/bigscreenplayer.setSubtitlesEnabled &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.setTransportControlsPosition","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.setTransportControlsPosition\">module:bigscreenplayer/bigscreenplayer.setTransportControlsPosition &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.toggleDebug","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.toggleDebug\">module:bigscreenplayer/bigscreenplayer.toggleDebug &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.transitions","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.transitions\">module:bigscreenplayer/bigscreenplayer.transitions &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.unmock","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.unmock\">module:bigscreenplayer/bigscreenplayer.unmock &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.unregisterForStateChanges","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.unregisterForStateChanges\">module:bigscreenplayer/bigscreenplayer.unregisterForStateChanges &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.unregisterForSubtitleChanges","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.unregisterForSubtitleChanges\">module:bigscreenplayer/bigscreenplayer.unregisterForSubtitleChanges &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.unregisterForTimeUpdates","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.unregisterForTimeUpdates\">module:bigscreenplayer/bigscreenplayer.unregisterForTimeUpdates &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer.unregisterPlugin","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#.unregisterPlugin\">module:bigscreenplayer/bigscreenplayer.unregisterPlugin &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer~getLiveSupport","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#~getLiveSupport\">module:bigscreenplayer/bigscreenplayer~getLiveSupport &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer~init","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#~init\">module:bigscreenplayer/bigscreenplayer~init &rtrif; undefined</a>"},{"title":"module:bigscreenplayer/bigscreenplayer~tearDown","link":"<a href=\"module-bigscreenplayer_bigscreenplayer.html#~tearDown\">module:bigscreenplayer/bigscreenplayer~tearDown &rtrif; undefined</a>"},{"title":"hasAttribute","link":"<a href=\"global.html#hasAttribute\">hasAttribute</a>"},{"title":"rgbaToRGB","link":"<a href=\"global.html#rgbaToRGB\">rgbaToRGB</a>"},{"title":"safeRemoveElement","link":"<a href=\"global.html#safeRemoveElement\">safeRemoveElement</a>"},{"title":"Time","link":"<a href=\"global.html#Time\">Time</a>"},{"title":"WindowTypes","link":"<a href=\"global.html#WindowTypes\">WindowTypes</a>"}];
        var options = {"shouldSort":true,"threshold":0.4,"location":0,"distance":100,"maxPatternLength":32,"minMatchCharLength":1}
          setupSearch(list, options)
      </script>
    

    

    

    

    


  </body>

</html>
